

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Use secure and hirearchical config — Node best practices</title>
    <meta charset="utf-8">
    <meta name="description" content="The largest Node.JS best practices list. Curated from the top ranked articles and always updated">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Use secure and hirearchical config — Node best practices">
    <meta property="og:description" content="The largest Node.JS best practices list. Curated from the top ranked articles and always updated">
    <meta property="og:image" content="https://github.io//nodebestpractices/images/logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Use secure and hirearchical config — Node best practices">
    <meta name="twitter:description" content="The largest Node.JS best practices list. Curated from the top ranked articles and always updated">
    <meta name="twitter:image" content="https://github.io/images/logo.png">

    <link rel="apple-touch-icon" sizes="57x57" href="/nodebestpractices/images/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/nodebestpractices/images/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/nodebestpractices/images/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/nodebestpractices/images/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/nodebestpractices/images/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/nodebestpractices/images/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/nodebestpractices/images/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/nodebestpractices/images/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/nodebestpractices/images/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/nodebestpractices/images/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/nodebestpractices/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/nodebestpractices/images/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/nodebestpractices/images/icons/favicon-16x16.png">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <link rel="icon" href="/nodebestpractices/images/logo.png" type="image/png">

    <meta name="msapplication-TileColor" content="#4fc08d">
    <meta name="theme-color" content="#4fc08d">

    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="manifest" href="/manifest.json">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Dosis:500&text=Node best practices' rel='stylesheet' type='text/css'>

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- main page styles -->
    <link rel="stylesheet" href="/nodebestpractices/css/page.css">

    <!-- this needs to be loaded before guide's inline scripts -->
    <script src="/nodebestpractices/js/vue.js"></script>
    <script>window.PAGE_TYPE = "guide"</script>
  </head>
  <body class="docs">    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>
    <div id="header">
  <a id="logo" href="/nodebestpractices/">
    <span>Node Best practices</span>
  </a>
  <ul id="nav">
    <li class="nav-dropdown-container learn">
  <a class="nav-link">Learn</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/nodebestpractices/project-structuring" class="nav-link">Project Structuring</a></li>
      <li><a href="/nodebestpractices/testing-and-quality" class="nav-link">Testing and quality</a></li>
    </ul></li>
  </ul>
</li>

<!--<li>
  <a href="/nodebestpractices/v2/guide/team.html" class="nav-link team">Team</a>
</li> -->
<li>
  <a href="https://github.com/kudapara/nodebestpractices/" target="_blank"><span class="fa fa-github"> @nodebestpractices</span></a>
</li>
<li>
  <a href="https://twitter.com/nodepractices/" target="_blank"><span class="fa fa-twitter"> @nodepractices</span></a>
</li>
  </ul>
</div>

    
      <div id="main" class="fix-sidebar">
        
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li class="nav-dropdown-container learn">
  <a class="nav-link">Learn</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/nodebestpractices/project-structuring" class="nav-link">Project Structuring</a></li>
      <li><a href="/nodebestpractices/testing-and-quality" class="nav-link">Testing and quality</a></li>
    </ul></li>
  </ul>
</li>

<!--<li>
  <a href="/nodebestpractices/v2/guide/team.html" class="nav-link team">Team</a>
</li> -->
<li>
  <a href="https://github.com/kudapara/nodebestpractices/" target="_blank"><span class="fa fa-github"> @nodebestpractices</span></a>
</li>
<li>
  <a href="https://twitter.com/nodepractices/" target="_blank"><span class="fa fa-twitter"> @nodepractices</span></a>
</li>
    </ul>
    <div class="list">
       <ul class="menu-root">
  
    
    
      
        <li><h3>Project Structuring</h3></li>
      
      
    
    <li>
      <a href="/nodebestpractices/project-structuring/index.html" class="sidebar-link">Structure by components</a>
    </li>
  
    
    
      
      
    
    <li>
      <a href="/nodebestpractices/project-structuring/config-guide.html" class="sidebar-link current">Use secure and hirearchical config</a>
    </li>
  
    
    
      
      
    
    <li>
      <a href="/nodebestpractices/project-structuring/create-layers.html" class="sidebar-link">Layer your app</a>
    </li>
  
    
    
      
      
    
    <li>
      <a href="/nodebestpractices/project-structuring/separate-express.html" class="sidebar-link">Separate Express 'app' and 'server'</a>
    </li>
  
    
    
      
      
    
    <li>
      <a href="/nodebestpractices/project-structuring/wrap-utilities.html" class="sidebar-link">Wrap common utilities as NPM packages</a>
    </li>
  
    
    
      
      
    
    <li>
      <a href="/nodebestpractices/testing-and-quality/bump-version.html" class="sidebar-link current">Use secure and hirearchical config</a>
    </li>
  
    
    
      
      
    
    <li>
      <a href="/nodebestpractices/testing-and-quality/ci-tools.html" class="sidebar-link">Carefully choose your CI platform</a>
    </li>
  
</ul>

    </div>
  </div>
</div>


<div class="content guide with-sidebar config-guide-guide">
  
    
    
  
  
    <h1>Use secure and hirearchical config</h1>
  
  <p>When dealing with configuration data, many things can just annoy and slow down: (1) setting all the keys using process environment variables becomes very tedious when in need to inject 100 keys (instead of just committing those in a config file), however when dealing with files only the devops admins can not alter the behaviour without changing the code. A reliable config solution must combine both configuration files + overrides from the process variables (b) when specifying all keys in a flat JSON, it becomes frustrating to find and modify entries when the list grows bigger. An hierarchical JSON files that is grouped into section can overcome this issue + few config libraries allow to store the configuration in multiple files and take care to union all in runtime. See example below (3) storing sensitive information like DB password is obviously not recommended but no quick and handy solution exists for this challenge. Some configuraiton library allows to encrypt files, others encrypt those entries during GIT commits or simple don’t store real values for those entries and specify the actual value during deployment via environment variables. (4) some advanced config scenario demand to inject configuration value via command line (vargs) or sync configuration info via centralized cache like Redis so different servers won’t hold different data.</p>
<p>Some configuration libraries can provide most of these features for free, have a look at NPM libraries like <a href="https://www.npmjs.com/package/nconf" target="_blank" rel="external">nconf</a> and <a href="https://www.npmjs.com/package/config" target="_blank" rel="external">config</a> which tick many of these requirements.</p>
<h2 id="Code-Example-–-hirearchical-config-helps-to-find-entries-and-maintain-huge-config-files"><a href="#Code-Example-–-hirearchical-config-helps-to-find-entries-and-maintain-huge-config-files" class="headerlink" title="Code Example – hirearchical config helps to find entries and maintain huge config files"></a>Code Example – hirearchical config helps to find entries and maintain huge config files</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="comment">// Customer module configs </span></div><div class="line">  <span class="string">"Customer"</span>: &#123;</div><div class="line">    <span class="string">"dbConfig"</span>: &#123;</div><div class="line">      <span class="string">"host"</span>: <span class="string">"localhost"</span>,</div><div class="line">      <span class="string">"port"</span>: <span class="number">5984</span>,</div><div class="line">      <span class="string">"dbName"</span>: <span class="string">"customers"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="string">"credit"</span>: &#123;</div><div class="line">      <span class="string">"initialLimit"</span>: <span class="number">100</span>,</div><div class="line">      <span class="comment">// Set low for development </span></div><div class="line">      <span class="string">"initialDays"</span>: <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

  
    <div class="guide-links">
      
        <span>← <a href="/nodebestpractices/project-structuring/index.html">Structure by components</a></span>
      
      
        <span style="float: right;"><a href="/nodebestpractices/project-structuring/create-layers.html">Layer your app</a> →</span>
      
    </div>
  
  <div class="footer">
    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/kudapara/nodebestpractices/blob/master/src/project-structuring/config-guide.md" target="_blank">
      Edit this page on Github!
    </a>
  </div>
</div>

        
      </div>
      <script src="/nodebestpractices/js/smooth-scroll.min.js"></script>
    

    <!-- main custom script for sidebars, version selects etc. -->
    <script src="/nodebestpractices/js/css.escape.js"></script>
    <script src="/nodebestpractices/js/common.js"></script>

    <!-- search 
    <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/nodebestpractices/css/search.css">
    <script src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script>
    [
      '#search-query-nav',
      '#search-query-sidebar',
      '#search-query-menu'
    ].forEach(function (selector) {
      if (!document.querySelector(selector)) return
      // search index defaults to v2
      var match = window.location.pathname.match(/^\/(v\d+)/)
      var version = match ? match[1] : 'v2'
      docsearch({
      appId: 'BH4D9OD16A',
      apiKey: '85cc3221c9f23bfbaa4e3913dd7625ea',
      indexName: 'vuejs',
      inputSelector: selector,
      algoliaOptions: { facetFilters: ["version:" + version] }
      })
    }) -->
    </script>

    <!-- fastclick -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      FastClick.attach(document.body)
    }, false)
    </script>
  </body>
</html>
